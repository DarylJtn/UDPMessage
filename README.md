#Concurrent and Distributed Systems
##Assignment 2
Date Set: 24 March 2014  
Date Due: 28 April 2014  
This assignment carries 50% of the coursework marks for this module. It should be
uploaded to Blackboard by midnight of the due date.  

###Question 1(a):
Modify the UDP chat server and client programs in Practical 6 so
that the chat server does not respond directly to clients’ requests but allows clients to
chat with each other. The server and client programs should implement the following
protocol:  
- 1. The client joins the chat by sending a one word message containing the client’s
name.   
  
- 2. The server maintains a list of client’s names, IP addresses and port numbers.
When a datagram is received and the IP address AND port number is not in the
list, the server expects the message to contain the client’s name. If the message
contains just one word, the server assumes that it is the client’s name and stores
it (along with the IP address and the port number). Otherwise, it sends back a
message to the client asking for a short, one-word name in the first message.  
  
- 3. The client signs off chat by sending a one word message, ’bye’.  
  
- 4. When a client signs off chat, the server removes his/her name, IP address and
port number from the list of clients in chat.  
  
- 5. During chat, each message from the client begins with one of three reserved
words :
who
,
whoami
,
all
– or
clientname
. The server’s response is as follows:
who
the server returns the names of all clients who are chatting;
whoami
the server returns the sender’s name;
all
the server prefixes sender’s name to the message and copies it to all clients
including the sender;
clientname
if this is a valid client name, sender’s name is prefixed and the message is
sent to the recipient; if the client is not in chat, the server returns an error
message to the client and the names of clients who are still in chat.
(80 marks)  
2
Marking Scheme
General
Chat server and chat client start without errors 20 marks
Client-Server Interaction
40 marks
Two or more clients are able to register with the chat server.
‘whoami’ returns user’s name; ‘who’ correctly returns the names of all
users who are correctly chatting.
A client is able to send a message to another named client. The re-
ceiver should see the sender’s name.
The ‘all’ command sends a message to all other clients. All receivers
should see the sender’s name.
On the ‘bye’ command, the client leaves the chat and ceases to appear
in the list generated by the ‘who’ command.
Robustness
20 marks
Attention to the following features or similar:
The first message from a client should be a one-word client name;
No two clients can have the same name;
A client’s name must not be a reserved word (i.e. who, whoami or all);
A client should not be able to send a message to a non-existent client.
Question 1(b)
Describe (in pseudo-code if necessary) how you would implement the
same protocol using TCP clients and a multi-threaded server. The description should
contain sufficient detail – data structures, methods, algotithm etc – for a competent
Java programmer to implement the solution.
(20 marks)
The answer to Question 1(b) should be typeset in pdf with 1.5 line spacing. The Net-
beans project should be submitted as a zip file.
